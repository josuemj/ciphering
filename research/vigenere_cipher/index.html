<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vigen√®re Cipher Research</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #f7f8fc;
            --panel: #ffffff;
            --ink: #0f172a;
            --muted: #475569;
            --accent: #7c5dff;
            --accent-soft: #ede9ff;
            --line: #e2e8f0;
            --shadow: 0 15px 40px rgba(21, 23, 58, 0.12);
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: 'Sora', 'Segoe UI', sans-serif;
            background: radial-gradient(circle at 20% 20%, #eef2ff, transparent 22%),
                radial-gradient(circle at 80% 0%, #e0f2fe, transparent 26%),
                var(--bg);
            color: var(--ink);
            line-height: 1.7;
        }

        .page {
            max-width: 1080px;
            margin: 0 auto;
            padding: 48px 22px 72px;
        }

        .lang-switch {
            position: fixed;
            top: 16px;
            right: 16px;
            padding: 10px 18px;
            cursor: pointer;
            background: linear-gradient(120deg, var(--accent), #5b8bff);
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            letter-spacing: 0.2px;
            box-shadow: 0 10px 25px rgba(124, 93, 255, 0.3);
            transition: transform 0.15s ease, box-shadow 0.15s ease;
        }

        .lang-switch:hover {
            transform: translateY(-1px);
            box-shadow: 0 12px 28px rgba(124, 93, 255, 0.35);
        }

        .card {
            background: var(--panel);
            border: 1px solid var(--line);
            border-radius: 14px;
            padding: 24px 26px 28px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .card+.card {
            margin-top: 20px;
        }

        .hero {
            padding: 30px 30px 32px;
        }

        .hero::after {
            content: "";
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at 15% 20%, rgba(124, 93, 255, 0.14), transparent 36%),
                radial-gradient(circle at 85% 25%, rgba(91, 139, 255, 0.14), transparent 32%);
            pointer-events: none;
        }

        .eyebrow {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: var(--accent-soft);
            color: var(--ink);
            border-radius: 999px;
            border: 1px solid var(--line);
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.6px;
        }

        .hero-title {
            margin: 14px 0 8px;
            font-size: 32px;
            letter-spacing: -0.5px;
        }

        .lead {
            margin: 0;
            color: var(--muted);
            max-width: 720px;
        }

        .section-title {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 16px;
            border: 1px solid var(--line);
            background: var(--accent-soft);
            border-radius: 10px;
            box-shadow: inset 0 0 0 1px rgba(124, 93, 255, 0.08);
            font-size: 20px;
            letter-spacing: -0.2px;
            margin: 0 0 14px;
            position: relative;
        }

        .section-title::before {
            content: "";
            width: 14px;
            height: 14px;
            background: var(--accent);
            border-radius: 4px;
            box-shadow: 0 6px 18px rgba(124, 93, 255, 0.35);
        }

        .section-body {
            color: var(--muted);
            display: grid;
            gap: 12px;
        }

        ul,
        ol {
            padding-left: 20px;
            margin: 0;
            color: var(--muted);
        }

        .tagged-list li::marker {
            color: var(--accent);
            font-weight: 700;
        }

        .reference-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .reference-list li+li {
            margin-top: 10px;
        }

        .reference-list a {
            color: var(--accent);
            font-weight: 600;
            text-decoration: none;
            border-bottom: 1px solid rgba(124, 93, 255, 0.25);
        }

        .reference-list a:hover {
            border-bottom-color: var(--accent);
        }

        .footer {
            text-align: center;
            margin-top: 28px;
            color: var(--muted);
            font-weight: 600;
            letter-spacing: 0.2px;
        }

        .v-demo {
            margin-top: 12px;
            border: 1px solid var(--line);
            border-radius: 14px;
            padding: 16px;
            background: #fff;
            box-shadow: var(--shadow);
        }

        .v-demo-grid {
            display: grid;
            gap: 16px;
            grid-template-columns: 1fr;
            align-items: start;
        }

        .v-demo-panel {
            display: grid;
            gap: 10px;
        }

        .strip-label {
            font-weight: 700;
            font-size: 12px;
            letter-spacing: 0.4px;
            text-transform: uppercase;
            color: var(--muted);
        }

        .label-strip {
            display: grid;
            grid-template-columns: auto 1fr;
            gap: 8px;
            align-items: center;
            padding: 10px 12px;
            border: 1px solid var(--line);
            border-radius: 12px;
            background: var(--accent-soft);
        }

        .label-chip {
            background: #fff;
            color: var(--ink);
            border-radius: 999px;
            border: 1px solid var(--line);
            padding: 6px 10px;
            font-weight: 700;
            font-size: 12px;
            box-shadow: inset 0 0 0 1px rgba(124, 93, 255, 0.08);
        }

        .letter-row {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .strip-letter {
            min-width: 38px;
            text-align: center;
            padding: 8px 10px;
            border-radius: 10px;
            border: 1px solid var(--line);
            background: #fff;
            font-weight: 700;
            letter-spacing: 0.3px;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease, color 0.2s ease;
        }

        .strip-letter.active {
            background: var(--accent);
            color: #fff;
            box-shadow: 0 10px 20px rgba(124, 93, 255, 0.28);
            transform: translateY(-2px);
        }

        .strip-letter.done {
            background: #e3f2ff;
            border-color: rgba(91, 139, 255, 0.5);
            color: var(--ink);
        }

        .strip-letter.result {
            border-style: dashed;
            opacity: 0.85;
        }

        .strip-letter.final {
            background: #16a34a;
            color: #fff;
            border-color: #0f9a42;
            box-shadow: 0 10px 20px rgba(22, 163, 74, 0.28);
        }

        .v-table-shell {
            border: 1px solid var(--line);
            border-radius: 12px;
            overflow: hidden;
            background: #fff;
            box-shadow: inset 0 1px 0 #f8fafc, 0 10px 30px rgba(15, 23, 42, 0.08);
        }

        .v-square {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }

        .v-square thead th {
            background: linear-gradient(120deg, #ede9ff, #e0f2fe);
            position: sticky;
            top: 0;
            z-index: 2;
        }

        .v-square th,
        .v-square td {
            border: 1px solid var(--line);
            text-align: center;
            padding: 6px 8px;
            color: var(--ink);
        }

        .v-square tbody th {
            background: #f8fafc;
            position: sticky;
            left: 0;
            z-index: 1;
        }

        .v-square td.row-active,
        .v-square th.row-active {
            background: #f3f0ff;
        }

        .v-square td.col-active,
        .v-square th.col-active {
            background: #e7f2ff;
        }

        .v-square td.cell-active {
            background: var(--accent);
            color: #fff;
            box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.5);
        }

        .v-square td.cell-final {
            background: #16a34a;
            color: #fff;
            font-weight: 700;
        }

        .demo-note {
            font-size: 13px;
            color: var(--muted);
        }

        @media (max-width: 640px) {
            .card {
                padding: 20px;
            }

            .hero-title {
                font-size: 26px;
            }

            .lang-switch {
                top: 12px;
                right: 12px;
            }
        }
    </style>
</head>

<body>

    <button class="lang-switch" onclick="toggleLanguage()">üåê Espa√±ol</button>

    <main class="page">
        <header class="hero card">
            <h1 class="hero-title" data-en="Vigen√®re Cipher Research" data-es="Investigaci√≥n del Cifrado Vigen√®re">
                Vigen√®re Cipher Research
            </h1>
        </header>

        <section class="card">
            <h2 class="section-title" data-en="What is the Vigen√®re Cipher?" data-es="¬øQu√© es el Cifrado Vigen√®re?">What
                is the Vigen√®re Cipher?</h2>
            <div class="section-body">
                <p data-en="The Vigen√®re cipher uses multiple Caesar shifts arranged in the Vigen√®re table, which serves as the key for encrypting and decrypting messages."
                    data-es="El cifrado de Vigen√®re usa m√∫ltiples desplazamientos C√©sar organizados en la tabla de Vigen√®re, que funciona como la clave para cifrar y descifrar mensajes.">
                    The Vigen√®re cipher uses multiple Caesar shifts arranged in the Vigen√®re table, which serves as the
                    key for encrypting and decrypting messages.
                </p>
                <img src="image.png" alt="Vigen√®re Square"
                    style="width:100%;border-radius:8px;box-shadow:0 8px 24px rgba(21,23,58,0.12);">
                <p data-en="It is a classic example of polyalphabetic substitution, increasing complexity by changing the shift based on the key word."
                    data-es="Es un ejemplo cl√°sico de sustituci√≥n polialfab√©tica, que aumenta la complejidad al cambiar el desplazamiento seg√∫n la palabra clave.">
                    It is a classic example of polyalphabetic substitution, increasing complexity by changing the shift
                    based on the key word.
                </p>
            </div>
        </section>

        <section class="card">
            <h2 class="section-title" data-en="How does the Vigen√®re Cipher work?"
                data-es="¬øC√≥mo funciona el Cifrado Vigen√®re?">
                How does the Vigen√®re Cipher work?</h2>
            <div class="section-body">
                <p data-en="Think of it as a shifting code that changes with every letter; unlike a simple code where &quot;A&quot; always becomes &quot;D&quot;, the shift depends on the matching key letter, so the same plaintext letter can turn into different ciphertext letters."
                    data-es="Piensa en √©l como un c√≥digo que cambia con cada letra; a diferencia de un c√≥digo simple donde &quot;A&quot; siempre se vuelve &quot;D&quot;, el desplazamiento depende de la letra correspondiente de la clave, as√≠ que la misma letra del mensaje puede volverse diferentes letras cifradas.">
                    Think of it as a shifting code that changes with every letter; unlike a simple code where "A" always
                    becomes "D", the shift depends on the matching key letter, so the same plaintext letter can turn
                    into different ciphertext letters.
                </p>
                <p data-en="To use it, you need three things: a message, a key word, and the Vigen√®re square."
                    data-es="Para usarlo necesitas tres cosas: un mensaje, una palabra clave y el cuadrado de Vigen√®re.">
                    To use it, you need three things: a message, a key word, and the Vigen√®re square.
                </p>
                <ul class="tagged-list">
                    <li data-en="Message: what you want to hide." data-es="Mensaje: lo que quieres ocultar.">Message:
                        what you want to hide.</li>
                    <li data-en="Key: a secret word (like &quot;PIZZA&quot;) repeated to match the message length."
                        data-es="Clave: una palabra secreta (como &quot;PIZZA&quot;) repetida para igualar la longitud del mensaje.">
                        Key: a secret word (like "PIZZA") repeated to match the message length.</li>
                    <li data-en="Vigen√®re square: a grid that lets you intersect the message letter and the key letter."
                        data-es="Cuadrado de Vigen√®re: una cuadr√≠cula que te permite intersectar la letra del mensaje y la letra de la clave.">
                        Vigen√®re square: a grid that lets you intersect the message letter and the key letter.</li>
                </ul>
                <p data-en="Process: write the key repeatedly over the message; for each position, use the row for the key letter and the column for the message letter on the square to get the cipher letter."
                    data-es="Proceso: escribe la clave repetidamente sobre el mensaje; para cada posici√≥n, usa en el cuadrado la fila de la letra de la clave y la columna de la letra del mensaje para obtener la letra cifrada.">
                    Process: write the key repeatedly over the message; for each position, use the row for the key
                    letter
                    and the column for the message letter on the square to get the cipher letter.
                </p>
            </div>
        </section>

        <section class="card">
            <h2 class="section-title" data-en="Why I choose the Vigen√®re Cipher?"
                data-es="¬øPor qu√© eleg√≠ el Cifrado Vigen√®re?">
                Why I choose the Vigen√®re Cipher?</h2>
            <div class="section-body">
                <p data-en="I had not heard of it before, so I decided to research it and found its shifting mechanism interesting."
                    data-es="No lo hab√≠a escuchado antes, as√≠ que decid√≠ investigarlo y su mecanismo de desplazamientos me pareci√≥ interesante.">
                    I had not heard of it before, so I decided to research it and found its shifting mechanism
                    interesting.
                </p>
            </div>
        </section>

        <section class="card">
            <h2 class="section-title" data-en="Application Sample" data-es="Ejemplo de Aplicaci√≥n">Application Sample
            </h2>
            <div class="section-body">
                <p data-en="Let's encrypt the word &quot;HOLA&quot; using the key &quot;SOL&quot;."
                    data-es="Cifremos la palabra &quot;HOLA&quot; usando la clave &quot;SOL&quot;.">
                    Let's encrypt the word "HOLA" using the key "SOL".
                </p>
                <ol class="tagged-list">
                    <li data-en="Align the text: message H O L A; key S O L S (repeat the key)."
                        data-es="Alinea el texto: mensaje H O L A; clave S O L S (repite la clave).">
                        Align the text: message H O L A; key S O L S (repeat the key).</li>
                    <li data-en="Look up each pair on the square: H+S=Z, O+O=C, L+L=W, A+S=S."
                        data-es="Busca cada par en el cuadrado: H+S=Z, O+O=C, L+L=W, A+S=S.">
                        Look up each pair on the square: H+S=Z, O+O=C, L+L=W, A+S=S.</li>
                    <li data-en="Result: ZCWS." data-es="Resultado: ZCWS.">Result: ZCWS.</li>
                </ol>
                <div class="v-demo" aria-label="Animated Vigen√®re table demo">
                    <div class="strip-label" data-en="Animated lookup" data-es="B√∫squeda animada">Animated lookup</div>
                    <div class="v-demo-grid">
                        <div class="v-demo-panel">
                            <div class="label-strip">
                                <span class="label-chip" data-en="Plaintext" data-es="Mensaje">Plaintext</span>
                                <div class="letter-row strip-plain">
                                    <span class="strip-letter" data-index="0">H</span>
                                    <span class="strip-letter" data-index="1">O</span>
                                    <span class="strip-letter" data-index="2">L</span>
                                    <span class="strip-letter" data-index="3">A</span>
                                </div>
                            </div>
                            <div class="label-strip">
                                <span class="label-chip" data-en="Key" data-es="Clave">Key</span>
                                <div class="letter-row strip-key">
                                    <span class="strip-letter" data-index="0">S</span>
                                    <span class="strip-letter" data-index="1">O</span>
                                    <span class="strip-letter" data-index="2">L</span>
                                    <span class="strip-letter" data-index="3">S</span>
                                </div>
                            </div>
                            <div class="label-strip">
                                <span class="label-chip" data-en="Result" data-es="Resultado">Result</span>
                                <div class="letter-row strip-result">
                                    <span class="strip-letter result" data-index="0" data-letter="Z"></span>
                                    <span class="strip-letter result" data-index="1" data-letter="C"></span>
                                    <span class="strip-letter result" data-index="2" data-letter="W"></span>
                                    <span class="strip-letter result" data-index="3" data-letter="S"></span>
                                </div>
                            </div>
                            <p class="demo-note"
                                data-en="Animation repeats automatically and highlights the intersection cells on the table."
                                data-es="La animaci√≥n se repite autom√°ticamente y resalta las celdas de intersecci√≥n en la tabla.">
                                Animation repeats automatically and highlights the intersection cells on the table.
                            </p>
                        </div>
                        <div class="v-table-shell">
                            <div id="v-table"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="card">
            <h2 class="section-title" data-en="Advantages" data-es="Ventajas">Advantages</h2>
            <div class="section-body">
                <ul class="tagged-list">
                    <li data-en="Polyalphabetic shifts reduce simple frequency analysis when the key is long enough."
                        data-es="Los desplazamientos polialfab√©ticos reducen el an√°lisis de frecuencia simple cuando la clave es lo suficientemente larga.">
                        Polyalphabetic shifts reduce simple frequency analysis when the key is long enough.</li>
                    <li data-en="Easy to teach and reproduce with pencil-and-paper methods."
                        data-es="Es f√°cil de ense√±ar y reproducir con m√©todos de l√°piz y papel.">
                        Easy to teach and reproduce with pencil-and-paper methods.</li>
                    <li data-en="Serves as a bridge to modern stream and block ciphers in historical courses."
                        data-es="Sirve como puente hacia cifradores de flujo y bloque modernos en cursos hist√≥ricos.">
                        Serves as a bridge to modern stream and block ciphers in historical courses.</li>
                </ul>
            </div>
        </section>

        <section class="card">
            <h2 class="section-title" data-en="Disadvantages / Vulnerabilities"
                data-es="Desventajas / Vulnerabilidades">Disadvantages / Vulnerabilities</h2>
            <div class="section-body">
                <ul class="tagged-list">
                    <li data-en="Repeated keys leak patterns, enabling Kasiski or index-of-coincidence attacks."
                        data-es="Las claves repetidas filtran patrones, lo que permite ataques de Kasiski o de √≠ndice de coincidencia.">
                        Repeated keys leak patterns, enabling Kasiski or index-of-coincidence attacks.</li>
                    <li data-en="Security depends heavily on key length and secrecy; short keys are weak."
                        data-es="La seguridad depende mucho de la longitud y el secreto de la clave; las claves cortas son d√©biles.">
                        Security depends heavily on key length and secrecy; short keys are weak.</li>
                    <li data-en="Modern computers can recover keys quickly if enough ciphertext is available."
                        data-es="Las computadoras modernas pueden recuperar claves r√°pidamente si hay suficiente texto cifrado.">
                        Modern computers can recover keys quickly if enough ciphertext is available.</li>
                </ul>
            </div>
        </section>

        <section class="card">
            <h2 class="section-title" data-en="References" data-es="Referencias">References</h2>
            <div class="section-body">
                <ul class="reference-list">
                    <li><a href="https://es.wikipedia.org/wiki/Cifrado_de_Vigen%C3%A8re" target="_blank"
                            rel="noreferrer" data-en="Wikipedia (ES) entry on the Vigen√®re cipher"
                            data-es="Art√≠culo de Wikipedia (ES) sobre el cifrado Vigen√®re">Wikipedia (ES) entry on the
                            Vigen√®re cipher</a></li>
                    <li data-en="Source: Gemini" data-es="Fuente: Gemini">Source: Gemini</li>
                </ul>
            </div>
        </section>

        <footer class="footer">
            <p data-en="By Josue Marroquin 22397 Universidad del Valle de Guatemala"
                data-es="Por Josue Marroquin 22397 Universidad del Valle de Guatemala">By Josue Marroquin 22397
                Universidad del Valle de Guatemala</p>
        </footer>
    </main>

    <script>
        let currentLang = 'en';

        function toggleLanguage() {
            currentLang = currentLang === 'en' ? 'es' : 'en';

            document.querySelectorAll('[data-en]').forEach(el => {
                el.textContent = el.getAttribute(`data-${currentLang}`);
            });

            const btn = document.querySelector('.lang-switch');
            btn.textContent = currentLang === 'en' ? 'üåê Espa√±ol' : 'üåê English';

            document.documentElement.lang = currentLang;
        }

        // Build Vigen√®re table
        const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        const tableContainer = document.getElementById('v-table');

        function buildVigenereTable() {
            const table = document.createElement('table');
            table.className = 'v-square';

            const thead = document.createElement('thead');
            const headRow = document.createElement('tr');
            headRow.appendChild(document.createElement('th'));
            letters.forEach(letter => {
                const th = document.createElement('th');
                th.textContent = letter;
                th.dataset.colHeader = letter;
                headRow.appendChild(th);
            });
            thead.appendChild(headRow);
            table.appendChild(thead);

            const tbody = document.createElement('tbody');
            letters.forEach((rowLetter, rowIdx) => {
                const tr = document.createElement('tr');
                const rowHead = document.createElement('th');
                rowHead.textContent = rowLetter;
                rowHead.dataset.rowHeader = rowLetter;
                tr.appendChild(rowHead);

                letters.forEach((colLetter, colIdx) => {
                    const td = document.createElement('td');
                    const cipherLetter = letters[(rowIdx + colIdx) % 26];
                    td.textContent = cipherLetter;
                    td.dataset.row = rowLetter;
                    td.dataset.col = colLetter;
                    td.dataset.value = cipherLetter;
                    tr.appendChild(td);
                });
                tbody.appendChild(tr);
            });
            table.appendChild(tbody);

            tableContainer.innerHTML = '';
            tableContainer.appendChild(table);
            return table;
        }

        const tableElement = buildVigenereTable();

        // Animation data
        const plainSeq = ['H', 'O', 'L', 'A'];
        const keySeq = ['S', 'O', 'L', 'S'];
        const cipherSeq = ['Z', 'C', 'W', 'S'];

        const plainLetters = Array.from(document.querySelectorAll('.strip-plain .strip-letter'));
        const keyLetters = Array.from(document.querySelectorAll('.strip-key .strip-letter'));
        const resultLetters = Array.from(document.querySelectorAll('.strip-result .strip-letter'));
        const intersections = plainSeq.map((plain, idx) => tableElement.querySelector(`td[data-row="${keySeq[idx]}"][data-col="${plain}"]`));

        let demoTimer = null;

        function clearTableHighlights() {
            tableElement.querySelectorAll('.row-active, .col-active, .cell-active, .cell-final, th.row-active, th.col-active').forEach(el => {
                el.classList.remove('row-active', 'col-active', 'cell-active', 'cell-final');
            });
        }

        function resetDemo() {
            if (demoTimer) {
                clearTimeout(demoTimer);
            }
            clearTableHighlights();
            plainLetters.forEach(el => el.classList.remove('active', 'done'));
            keyLetters.forEach(el => el.classList.remove('active', 'done'));
            resultLetters.forEach(el => {
                el.classList.remove('active', 'done', 'final');
                el.textContent = '';
            });
            document.querySelectorAll('th.row-active, th.col-active').forEach(el => {
                el.classList.remove('row-active', 'col-active');
            });
        }

        function highlightHeaders(rowLetter, colLetter) {
            const rowHeader = tableElement.querySelector(`th[data-row-header="${rowLetter}"]`);
            const colHeader = tableElement.querySelector(`th[data-col-header="${colLetter}"]`);
            if (rowHeader) rowHeader.classList.add('row-active');
            if (colHeader) colHeader.classList.add('col-active');
        }

        function highlightStep(step) {
            clearTableHighlights();

            const plainLetter = plainSeq[step];
            const keyLetter = keySeq[step];

            plainLetters.forEach((el, idx) => {
                el.classList.toggle('active', idx === step);
                el.classList.toggle('done', idx < step);
            });
            keyLetters.forEach((el, idx) => {
                el.classList.toggle('active', idx === step);
                el.classList.toggle('done', idx < step);
            });
            resultLetters.forEach((el, idx) => {
                if (idx <= step) {
                    el.textContent = cipherSeq[idx];
                    el.classList.add(idx === step ? 'active' : 'done');
                } else {
                    el.textContent = '';
                    el.classList.remove('active', 'done', 'final');
                }
            });

            tableElement.querySelectorAll(`td[data-row="${keyLetter}"]`).forEach(td => td.classList.add('row-active'));
            tableElement.querySelectorAll(`td[data-col="${plainLetter}"]`).forEach(td => td.classList.add('col-active'));

            const cell = tableElement.querySelector(`td[data-row="${keyLetter}"][data-col="${plainLetter}"]`);
            if (cell) cell.classList.add('cell-active');
            highlightHeaders(keyLetter, plainLetter);
        }

        function showFinal() {
            clearTableHighlights();
            intersections.forEach(cell => cell && cell.classList.add('cell-final'));
            plainLetters.forEach(el => el.classList.remove('active'));
            keyLetters.forEach(el => el.classList.remove('active'));
            resultLetters.forEach((el, idx) => {
                el.textContent = cipherSeq[idx];
                el.classList.remove('active');
                el.classList.add('done', 'final');
            });
        }

        function playDemo() {
            resetDemo();
            let step = 0;

            const run = () => {
                if (step < plainSeq.length) {
                    highlightStep(step);
                    step += 1;
                    demoTimer = setTimeout(run, 1500);
                } else {
                    showFinal();
                    demoTimer = setTimeout(() => {
                        resetDemo();
                        step = 0;
                        run();
                    }, 1800);
                }
            };

            run();
        }

        playDemo();
    </script>
</body>

</html>